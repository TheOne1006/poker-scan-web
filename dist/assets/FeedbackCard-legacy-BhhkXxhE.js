System.register(["./index-legacy-IgQcVkL8.js","./index-legacy-Dx5P1aGd.js"],function(e,i){"use strict";var t,l,s,n,r,a,d,o,c,x,h,p,u,g,j,m,v,y,f,b,w;return{setters:[e=>{t=e.r,l=e.j,s=e.q,n=e.s,r=e.h,a=e.t,d=e.v,o=e.w,c=e.x,x=e.y,h=e.z,p=e.A,u=e.g,g=e.B,j=e.C,m=e.D,v=e.E,y=e.F},e=>{f=e.a,b=e.b,w=e.e}],execute:function(){const i=[{value:"bug",label:"Bug反馈",description:"Bug 反馈"},{value:"feature",label:"新功能",description:"希望新增什么功能"},{value:"suggestion",label:"建议",description:"对产品的建议便于改良"}];e("F",({onSubmit:e,onClose:v})=>{const[y,k]=t.useState("bug"),[C,R]=t.useState(""),[S,B]=t.useState([]),[z,F]=t.useState(!1),[I,L]=t.useState(!1),[T,U]=t.useState(""),D=y&&C.trim()&&!z;return l.jsxs("div",{className:"feedback-form",children:[l.jsx(s,{children:l.jsxs(n,{children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[l.jsx(r,{children:l.jsx("strong",{children:"反馈类型"})}),l.jsx(a,{style:{width:"auto"},interface:"action-sheet",placeholder:"请选择反馈类型",value:y,onIonChange:e=>k(e.detail.value),children:i.map(e=>l.jsx(d,{value:e.value,children:e.label},e.value))})]}),l.jsxs("div",{style:{marginBottom:"10px"},children:[l.jsx(r,{children:l.jsxs("strong",{children:["图片 (",S.length,"/5)"]})}),l.jsx(o,{style:{marginTop:"6px"},children:l.jsxs(c,{children:[S.map((e,i)=>l.jsx(x,{size:"4",children:l.jsxs("div",{style:{position:"relative"},children:[l.jsx(h,{src:URL.createObjectURL(e),alt:`图片 ${i+1}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px"}}),l.jsx(p,{fill:"clear",size:"small",style:{position:"absolute",top:"4px",right:"4px","--border-radius":"50%","--background":"rgba(0,0,0,0.6)",width:"32px",height:"32px"},onClick:()=>(e=>{B(i=>i.filter((i,t)=>t!==e))})(i),children:l.jsx(u,{icon:f,style:{color:"white"}})})]})},i)),S.length<5&&l.jsx(x,{size:"4",children:l.jsx("div",{onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},style:{width:"100%",height:"100px",border:"2px dashed #ccc",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:"#f8f9fa"},children:l.jsx(u,{icon:b,style:{fontSize:"32px",color:"#999"}})})})]})})]}),l.jsxs("div",{style:{marginTop:"10px"},children:[l.jsx(r,{children:l.jsx("strong",{children:"反馈内容"})}),l.jsx(g,{placeholder:"请输入反馈内容",value:C,onIonInput:e=>R(e.detail.value),rows:3,maxlength:500,counter:!0,fill:"outline"})]}),l.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const i=e.target.files;if(i){if(S.length+i.length>5)return U("图片最多5张"),void L(!0);Array.from(i).forEach(e=>{if(e.size>5242880)return U("图片大小不能超过5MB"),void L(!0);const i=new FileReader;i.onload=()=>{B(i=>[...i,e])},i.readAsDataURL(e)}),e.target.value=""}},style:{display:"none"},id:"image-upload",disabled:S.length>=5}),l.jsxs("div",{style:{marginTop:"5px",display:"flex",gap:"10px"},children:[l.jsx(p,{expand:"block",onClick:v,disabled:z,fill:"outline",children:"关闭"}),l.jsx(p,{expand:"block",onClick:async()=>{if(!C.trim())return U("请输入反馈内容"),void L(!0);F(!0);try{await e(C.trim(),y,S),U("反馈成功"),L(!0),k("bug"),R(""),B([])}catch(i){U("反馈失败"),L(!0)}finally{F(!1)}},disabled:!D||z,fill:z?"outline":"solid",style:{flex:1},children:z?l.jsx(j,{type:"indeterminate",style:{marginRight:"8px"}}):l.jsxs(l.Fragment,{children:[l.jsx(u,{icon:w,slot:"start"}),"提交"]})})]})]})}),l.jsx(m,{isOpen:I,onDidDismiss:()=>L(!1),message:T,duration:3e3,position:"top"})]})}),e("a",({type:e,description:t,images:r})=>{return l.jsx("div",{className:"feedback-form",children:l.jsxs(s,{color:"warning",children:[l.jsx(v,{children:l.jsx(y,{children:(a=e,(null===(d=i.find(e=>e.value===a))||void 0===d?void 0:d.label)||a)})}),l.jsxs(n,{children:[r&&r.length>0&&l.jsx("div",{style:{marginBottom:"10px"},children:l.jsx(o,{style:{marginTop:"6px"},children:l.jsx(c,{children:r.map((e,i)=>l.jsx(x,{size:"4",children:l.jsx("div",{style:{position:"relative"},children:l.jsx(h,{src:URL.createObjectURL(e),alt:`图片 ${i+1}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"8px"}})})},i))})})}),l.jsx("div",{style:{marginTop:"10px"},children:t})]})]})});var a,d})}}});
